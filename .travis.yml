language: python

jobs:
  include:
    # perform a linux build
    - services: docker
    # # and a mac build
    # - os: osx
    #   language: shell
    # # and a windows build
    # - os: windows
    #   language: shell
    #   before_install:
    #     - choco install python --version 3.8.0
    #     - export PATH="/c/Python38:/c/Python38/Scripts:$PATH"

env:
  global:
    CIBW_TEST_REQUIRES=https://github.com/brandon-rhodes/assay/archive/master.zip
    CIBW_TEST_COMMAND="pwd; ls -CF; python -m assay --batch skyfield/tests/test_io.py"
#    CIBW_TEST_COMMAND="python -c \"from skyfield import api; api.load('de421.bsp')\""


install:
  - python -m pip install twine cibuildwheel==1.1.0

script:
  - python -m cibuildwheel --output-dir wheelhouse

after_success:
  - ls -l wheelhouse/
